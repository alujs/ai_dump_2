{
  "source_markdown": "graph_gateway_reference_points.md",
  "generated_at": "2026-02-17",
  "ref_index": {
    "DOC-OVERVIEW": {
      "line": 2,
      "text": "[REF:DOC-OVERVIEW]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs)"
    },
    "CITE-RULES": {
      "line": 12,
      "text": "[REF:CITE-RULES]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > How to cite this doc"
    },
    "SEC-1": {
      "line": 21,
      "text": "[REF:SEC-1]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 1) Constraints and target outcomes"
    },
    "CONSTRAINTS": {
      "line": 24,
      "text": "[REF:CONSTRAINTS]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 1) Constraints and target outcomes > 1.1 Hard constraints (ADP reality)"
    },
    "NO-EMBEDDINGS": {
      "line": 25,
      "text": "- No external LLM services (including embeddings). [REF:NO-EMBEDDINGS]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 1) Constraints and target outcomes > 1.1 Hard constraints (ADP reality)"
    },
    "SINGLE-TOOL": {
      "line": 26,
      "text": "- MCP environment; single tool `controller_turn` via NDJSON stdio (JSON-RPC 2.0, protocol `2025-11-25`). [REF:SINGLE-TOO",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 1) Constraints and target outcomes > 1.1 Hard constraints (ADP reality)"
    },
    "SANDBOX-ONLY": {
      "line": 27,
      "text": "- Planner may only write to sandbox (`.ai/tmp/`) via `write_scratch_file`; **must not mutate repo** during planning. [RE",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 1) Constraints and target outcomes > 1.1 Hard constraints (ADP reality)"
    },
    "PLAN-BEFORE-EXEC": {
      "line": 28,
      "text": "- Agent must output a **PlanGraph** via `submit_execution_plan` before execution. [REF:PLAN-BEFORE-EXEC]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 1) Constraints and target outcomes > 1.1 Hard constraints (ADP reality)"
    },
    "EXEC-GATED": {
      "line": 29,
      "text": "- Execution (if enabled) is mediated via VM sandbox and gated by collision guard. [REF:EXEC-GATED]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 1) Constraints and target outcomes > 1.1 Hard constraints (ADP reality)"
    },
    "CODEBASE-CONTEXT": {
      "line": 30,
      "text": "- Codebase: Angular 14 + TS/HTML; dashboard-heavy; ag-Grid; Shadow DOM via `sdf-*`; migration from `adp-*` → `sdf-*`; mi",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 1) Constraints and target outcomes > 1.1 Hard constraints (ADP reality)"
    },
    "NEO4J-LOCAL": {
      "line": 31,
      "text": "- Local Neo4j (bolt://127.0.0.1:7687) with lazy dynamic import for Node ≥25 compatibility. [REF:NEO4J-LOCAL]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 1) Constraints and target outcomes > 1.1 Hard constraints (ADP reality)"
    },
    "AUTHORITY": {
      "line": 34,
      "text": "[REF:AUTHORITY]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 1) Constraints and target outcomes > 1.2 Non‑negotiable principle: authority"
    },
    "DAY0-SUCCESS": {
      "line": 42,
      "text": "[REF:DAY0-SUCCESS]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 1) Constraints and target outcomes > 1.3 Day‑0 success criteria"
    },
    "CP-REQUIRED": {
      "line": 44,
      "text": "- An **authoritative ContextPack** with a real entrypoint + real definition, plus required proof chains (federation, UI ",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 1) Constraints and target outcomes > 1.3 Day‑0 success criteria"
    },
    "PG-EVIDENCE-LINK": {
      "line": 45,
      "text": "- An **evidence-linked PlanGraph** where each change step cites requirement evidence + code evidence + verification. [RE",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 1) Constraints and target outcomes > 1.3 Day‑0 success criteria"
    },
    "ESCALATE-NO-GUESS": {
      "line": 46,
      "text": "- A deterministic **Escalate loop**: missing grounding yields structured `request_evidence_guidance`, not guessing. [REF",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 1) Constraints and target outcomes > 1.3 Day‑0 success criteria"
    },
    "MEMORY-AWARE": {
      "line": 47,
      "text": "- A **friction-aware plan** that satisfies active memory rules (plan_rule, few_shot, strategy_signal). [REF:MEMORY-AWARE",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 1) Constraints and target outcomes > 1.3 Day‑0 success criteria"
    },
    "ENDSTATE-GOAL": {
      "line": 50,
      "text": "[REF:ENDSTATE-GOAL]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 1) Constraints and target outcomes > 1.4 End‑state goal (complete capability)"
    },
    "UI-FEATURE": {
      "line": 52,
      "text": "- UI feature creation (ag-Grid table flows + routing + federation) [REF:UI-FEATURE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 1) Constraints and target outcomes > 1.4 End‑state goal (complete capability)"
    },
    "API-FEATURE": {
      "line": 53,
      "text": "- API/contract feature creation (Swagger anchors → implementation mapping) [REF:API-FEATURE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 1) Constraints and target outcomes > 1.4 End‑state goal (complete capability)"
    },
    "DEBUG-FEATURE": {
      "line": 54,
      "text": "- Debugging (symptom → behavior chain → candidates) [REF:DEBUG-FEATURE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 1) Constraints and target outcomes > 1.4 End‑state goal (complete capability)"
    },
    "MIGRATION-FEATURE": {
      "line": 55,
      "text": "- Migration (adp→sdf; plus \"prefer sdf over native controls when possible\") [REF:MIGRATION-FEATURE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 1) Constraints and target outcomes > 1.4 End‑state goal (complete capability)"
    },
    "LEARNING-MEMORY": {
      "line": 56,
      "text": "- Continuous improvement via dimensional memory system with friction-driven learning [REF:LEARNING-MEMORY]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 1) Constraints and target outcomes > 1.4 End‑state goal (complete capability)"
    },
    "RETROSPECTIVE": {
      "line": 57,
      "text": "- Session retrospective via `signal_task_complete` with friction analysis [REF:RETROSPECTIVE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 1) Constraints and target outcomes > 1.4 End‑state goal (complete capability)"
    },
    "SEC-2": {
      "line": 62,
      "text": "[REF:SEC-2]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 2) Glossary (terms we will not misuse)"
    },
    "DEF-CONTEXTPACK": {
      "line": 64,
      "text": "- **ContextPack (file):** TaskSpec + anchors + evidence + active strategy + policies + active memories + allowed recipes",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 2) Glossary (terms we will not misuse)"
    },
    "DEF-PLANGRAPH": {
      "line": 65,
      "text": "- **PlanGraph (file):** evidence-linked steps (change/validate/escalate/side_effect) executable without \"figuring things",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 2) Glossary (terms we will not misuse)"
    },
    "DEF-RETRIEVAL": {
      "line": 66,
      "text": "- **Retrieval heuristics:** system-side deterministic rules used to build ContextPacks (candidate lanes, scoring, closur",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 2) Glossary (terms we will not misuse)"
    },
    "DEF-STRATEGY": {
      "line": 67,
      "text": "- **Strategy:** agent operating doctrine: checkpoints, escalation triggers, validation profile, and recipe preferences (",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 2) Glossary (terms we will not misuse)"
    },
    "DEF-POLICY": {
      "line": 68,
      "text": "- **Policy:** hard/soft constraints (no adp, prefer sdf, federation proof required, etc.). [REF:DEF-POLICY]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 2) Glossary (terms we will not misuse)"
    },
    "DEF-RECIPE": {
      "line": 69,
      "text": "- **Recipe:** authorized transformation/workflow (codemod + parameters + invariants + verifiers). [REF:DEF-RECIPE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 2) Glossary (terms we will not misuse)"
    },
    "DEF-EXAMPLE": {
      "line": 70,
      "text": "- **Few-shot Example:** a mined or curated before/after payload referenced by PlanGraph and injected in `trace_symbol_gr",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 2) Glossary (terms we will not misuse)"
    },
    "DEF-MEMORY": {
      "line": 71,
      "text": "- **Memory Record:** dimensional friction-derived knowledge (few_shot, plan_rule, strategy_signal, informational) tied t",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 2) Glossary (terms we will not misuse)"
    },
    "DEF-ANCHOR": {
      "line": 72,
      "text": "- **Domain Anchor:** folder-based domain boundary auto-seeded from repo structure. [REF:DEF-ANCHOR]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 2) Glossary (terms we will not misuse)"
    },
    "DEF-FRICTION": {
      "line": 73,
      "text": "- **Friction Ledger:** append-only JSONL log of rejection events for retrospective analysis. [REF:DEF-FRICTION]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 2) Glossary (terms we will not misuse)"
    },
    "DEF-FACT": {
      "line": 74,
      "text": "- **Fact plane:** derived graph data from repo snapshots (rebuildable). [REF:DEF-FACT]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 2) Glossary (terms we will not misuse)"
    },
    "DEF-POLICY-PLANE": {
      "line": 75,
      "text": "- **Policy plane:** versioned graph data (strategies/policies/recipes/aliases/mappings/examples). [REF:DEF-POLICY-PLANE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 2) Glossary (terms we will not misuse)"
    },
    "DEF-EPISODIC": {
      "line": 76,
      "text": "- **Episodic plane:** per WorkID; append-only attempt history and observations. [REF:DEF-EPISODIC]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 2) Glossary (terms we will not misuse)"
    },
    "SEC-3": {
      "line": 81,
      "text": "[REF:SEC-3]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 3) System decomposition (\"boxes\") and responsibilities"
    },
    "BOXES": {
      "line": 84,
      "text": "[REF:BOXES]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 3) System decomposition (\"boxes\") and responsibilities > 3.1 Boxes"
    },
    "BOX-SENTRY": {
      "line": 85,
      "text": "- **Sentry:** identity + authorization + gating (WorkID/AgentID, scope allowlist, budgets, commit gates, capability matr",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 3) System decomposition (\"boxes\") and responsibilities > 3.1 Boxes"
    },
    "BOX-RETRIEVAL": {
      "line": 86,
      "text": "- **Retrieval:** connectors + lexeme translation + candidate gen + rerank + anchor selection + closure → ContextPack. [R",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 3) System decomposition (\"boxes\") and responsibilities > 3.1 Boxes"
    },
    "BOX-GRAPH": {
      "line": 87,
      "text": "- **Graph:** fact/policy/episodic planes and query surface. [REF:BOX-GRAPH]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 3) System decomposition (\"boxes\") and responsibilities > 3.1 Boxes"
    },
    "BOX-VALIDATOR": {
      "line": 88,
      "text": "- **Plan Validator:** accepts/rejects PlanGraph with explicit rejection codes + memory rule enforcement. [REF:BOX-VALIDA",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 3) System decomposition (\"boxes\") and responsibilities > 3.1 Boxes"
    },
    "BOX-VM": {
      "line": 89,
      "text": "- **VM/Executor:** controlled execution substrate (worktrees, codemods, patch apply, validators). [REF:BOX-VM]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 3) System decomposition (\"boxes\") and responsibilities > 3.1 Boxes"
    },
    "BOX-VALIDATORS": {
      "line": 90,
      "text": "- **Validators:** tests/build/a11y/cypress; shadow-aware where needed; confidence grading. [REF:BOX-VALIDATORS]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 3) System decomposition (\"boxes\") and responsibilities > 3.1 Boxes"
    },
    "BOX-OBSERVATION": {
      "line": 91,
      "text": "- **Observation:** run trace, attempt history, metrics, failure signatures, rejection heatmaps. [REF:BOX-OBSERVATION]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 3) System decomposition (\"boxes\") and responsibilities > 3.1 Boxes"
    },
    "BOX-MEMORY": {
      "line": 92,
      "text": "- **Memory:** dimensional memory service with friction-driven creation, domain anchors, and three enforcement mechanisms",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 3) System decomposition (\"boxes\") and responsibilities > 3.1 Boxes"
    },
    "BOX-AUTHOR": {
      "line": 93,
      "text": "- **Author:** upsert validated learnings into policy plane (aliases, recipes, examples, strategy tuning). [REF:BOX-AUTHO",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 3) System decomposition (\"boxes\") and responsibilities > 3.1 Boxes"
    },
    "BOX-SIDEEFFECTS": {
      "line": 94,
      "text": "- **SideEffects:** Jira updates/attachments/PR creation/notifications (explicitly gated). [REF:BOX-SIDEEFFECTS]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 3) System decomposition (\"boxes\") and responsibilities > 3.1 Boxes"
    },
    "FLOW-DIAGRAM": {
      "line": 97,
      "text": "[REF:FLOW-DIAGRAM]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 3) System decomposition (\"boxes\") and responsibilities > 3.2 Box-to-box flow diagram"
    },
    "SEC-4": {
      "line": 126,
      "text": "[REF:SEC-4]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 4) Data planes, immutability, and versioning"
    },
    "PLANES": {
      "line": 129,
      "text": "[REF:PLANES]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 4) Data planes, immutability, and versioning > 4.1 Plane separation (single biggest sanity saver)"
    },
    "FACT-PLANE-RULE": {
      "line": 130,
      "text": "- **Fact plane:** derived; rebuildable from snapshot. [REF:FACT-PLANE-RULE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 4) Data planes, immutability, and versioning > 4.1 Plane separation (single biggest sanity saver)"
    },
    "POLICY-PLANE-RULE": {
      "line": 131,
      "text": "- **Policy plane:** curated; **append + supersede**, never overwrite. [REF:POLICY-PLANE-RULE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 4) Data planes, immutability, and versioning > 4.1 Plane separation (single biggest sanity saver)"
    },
    "EPISODIC-PLANE-RULE": {
      "line": 132,
      "text": "- **Episodic plane:** per WorkID; append-only attempt history and observations. [REF:EPISODIC-PLANE-RULE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 4) Data planes, immutability, and versioning > 4.1 Plane separation (single biggest sanity saver)"
    },
    "MEMORY-PLANE-RULE": {
      "line": 133,
      "text": "- **Memory plane:** dimensional records with lifecycle states (pending → provisional → approved). [REF:MEMORY-PLANE-RULE",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 4) Data planes, immutability, and versioning > 4.1 Plane separation (single biggest sanity saver)"
    },
    "SNAPSHOT-PURITY": {
      "line": 136,
      "text": "[REF:SNAPSHOT-PURITY]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 4) Data planes, immutability, and versioning > 4.2 Snapshot purity"
    },
    "PACK-VERSIONING": {
      "line": 142,
      "text": "[REF:PACK-VERSIONING]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 4) Data planes, immutability, and versioning > 4.3 Artifact versioning (ContextPack files are physical)"
    },
    "SLICE-ACTIVE-ONLY": {
      "line": 145,
      "text": "- Agent slice access should be limited to *active* pack unless replay explicitly enabled. [REF:SLICE-ACTIVE-ONLY]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 4) Data planes, immutability, and versioning > 4.3 Artifact versioning (ContextPack files are physical)"
    },
    "SEC-5": {
      "line": 150,
      "text": "[REF:SEC-5]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 5) Graph schema: minimum for day‑0, extensible for end-state"
    },
    "PROOF-CHAINS": {
      "line": 153,
      "text": "[REF:PROOF-CHAINS]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 5) Graph schema: minimum for day‑0, extensible for end-state > 5.1 Required proof chains (UI + federation)"
    },
    "CHAIN-AGGRID": {
      "line": 154,
      "text": "UI behavior chain (often required for dashboard work): [REF:CHAIN-AGGRID]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 5) Graph schema: minimum for day‑0, extensible for end-state > 5.1 Required proof chains (UI + federation)"
    },
    "CHAIN-FEDERATION": {
      "line": 165,
      "text": "Federation proof chain (required when federated): [REF:CHAIN-FEDERATION]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 5) Graph schema: minimum for day‑0, extensible for end-state > 5.1 Required proof chains (UI + federation)"
    },
    "FACT-NODES": {
      "line": 175,
      "text": "[REF:FACT-NODES]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 5) Graph schema: minimum for day‑0, extensible for end-state > 5.2 Fact plane node types (day‑0 minimum)"
    },
    "ANCHOR-NODE": {
      "line": 183,
      "text": "- DomainAnchor (auto-seeded from folder structure) [REF:ANCHOR-NODE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 5) Graph schema: minimum for day‑0, extensible for end-state > 5.2 Fact plane node types (day‑0 minimum)"
    },
    "FACT-EDGES": {
      "line": 186,
      "text": "[REF:FACT-EDGES]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 5) Graph schema: minimum for day‑0, extensible for end-state > 5.3 Fact plane edge types (day‑0 minimum)"
    },
    "MEMORY-EDGE": {
      "line": 193,
      "text": "- APPLIES_TO (MemoryRecord → DomainAnchor) [REF:MEMORY-EDGE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 5) Graph schema: minimum for day‑0, extensible for end-state > 5.3 Fact plane edge types (day‑0 minimum)"
    },
    "POLICY-ENTITIES": {
      "line": 196,
      "text": "[REF:POLICY-ENTITIES]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 5) Graph schema: minimum for day‑0, extensible for end-state > 5.4 Policy plane entities (strategies, policies, recipes, examples)"
    },
    "POLICYRULE": {
      "line": 197,
      "text": "- PolicyRule (hard/soft) [REF:POLICYRULE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 5) Graph schema: minimum for day‑0, extensible for end-state > 5.4 Policy plane entities (strategies, policies, recipes, examples)"
    },
    "STRATEGY-NODE": {
      "line": 198,
      "text": "- Strategy (agent doctrine) [REF:STRATEGY-NODE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 5) Graph schema: minimum for day‑0, extensible for end-state > 5.4 Policy plane entities (strategies, policies, recipes, examples)"
    },
    "VALIDATIONPROFILE": {
      "line": 199,
      "text": "- ValidationProfile (required checks + confidence rules) [REF:VALIDATIONPROFILE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 5) Graph schema: minimum for day‑0, extensible for end-state > 5.4 Policy plane entities (strategies, policies, recipes, examples)"
    },
    "ESCALATIONTRIGGER": {
      "line": 200,
      "text": "- EscalationTrigger [REF:ESCALATIONTRIGGER]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 5) Graph schema: minimum for day‑0, extensible for end-state > 5.4 Policy plane entities (strategies, policies, recipes, examples)"
    },
    "RECIPE-NODE": {
      "line": 201,
      "text": "- Recipe (codemod/workflow) [REF:RECIPE-NODE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 5) Graph schema: minimum for day‑0, extensible for end-state > 5.4 Policy plane entities (strategies, policies, recipes, examples)"
    },
    "LEXEMEALIAS": {
      "line": 202,
      "text": "- LexemeAlias + Domain [REF:LEXEMEALIAS]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 5) Graph schema: minimum for day‑0, extensible for end-state > 5.4 Policy plane entities (strategies, policies, recipes, examples)"
    },
    "MIGRATIONMAP": {
      "line": 203,
      "text": "- MigrationMap (adp→sdf; coverage) [REF:MIGRATIONMAP]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 5) Graph schema: minimum for day‑0, extensible for end-state > 5.4 Policy plane entities (strategies, policies, recipes, examples)"
    },
    "EXAMPLEREF": {
      "line": 204,
      "text": "- ExampleRef (preferred/anti/deprecated; last verified snapshot) [REF:EXAMPLEREF]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 5) Graph schema: minimum for day‑0, extensible for end-state > 5.4 Policy plane entities (strategies, policies, recipes, examples)"
    },
    "SDFCONTRACTINDEX": {
      "line": 205,
      "text": "- SdfContractIndex (derived from `.d.ts`; versioned) [REF:SDFCONTRACTINDEX]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 5) Graph schema: minimum for day‑0, extensible for end-state > 5.4 Policy plane entities (strategies, policies, recipes, examples)"
    },
    "RETRIEVALCONFIG": {
      "line": 206,
      "text": "- RetrievalConfig + RetrievalMacro (system retrieval knobs) [REF:RETRIEVALCONFIG]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 5) Graph schema: minimum for day‑0, extensible for end-state > 5.4 Policy plane entities (strategies, policies, recipes, examples)"
    },
    "MEMORYRECORD": {
      "line": 207,
      "text": "- MemoryRecord (few_shot/plan_rule/strategy_signal/informational) [REF:MEMORYRECORD]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 5) Graph schema: minimum for day‑0, extensible for end-state > 5.4 Policy plane entities (strategies, policies, recipes, examples)"
    },
    "SEC-6": {
      "line": 212,
      "text": "[REF:SEC-6]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 6) Retrieval: lexical-first without embeddings (algorithmic contract)"
    },
    "LEXEME-MODEL": {
      "line": 215,
      "text": "[REF:LEXEME-MODEL]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 6) Retrieval: lexical-first without embeddings (algorithmic contract) > 6.1 Lexeme model (typed lexical seeds)"
    },
    "LEXEME-KINDS": {
      "line": 217,
      "text": "Kinds to support at minimum: ENDPOINT_PATH, ROUTE_SEGMENT, SYMBOL, SELECTOR_TAG, GRID_FIELD, UI_LABEL, CONFIG_FLAG, ERRO",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 6) Retrieval: lexical-first without embeddings (algorithmic contract) > 6.1 Lexeme model (typed lexical seeds)"
    },
    "NORMALIZATION": {
      "line": 220,
      "text": "[REF:NORMALIZATION]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 6) Retrieval: lexical-first without embeddings (algorithmic contract) > 6.2 Normalization (replaces embedding fuzz)"
    },
    "TAILWIND-DOWNWEIGHT": {
      "line": 224,
      "text": "- downweight Tailwind utility tokens (near-zero by default) [REF:TAILWIND-DOWNWEIGHT]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 6) Retrieval: lexical-first without embeddings (algorithmic contract) > 6.2 Normalization (replaces embedding fuzz)"
    },
    "CANDIDATE-LANES": {
      "line": 227,
      "text": "[REF:CANDIDATE-LANES]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 6) Retrieval: lexical-first without embeddings (algorithmic contract) > 6.3 Candidate generation must be multi-lane"
    },
    "FIVE-LANES": {
      "line": 228,
      "text": "Five mandatory retrieval lanes: [REF:FIVE-LANES]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 6) Retrieval: lexical-first without embeddings (algorithmic contract) > 6.3 Candidate generation must be multi-lane"
    },
    "RERANKING": {
      "line": 236,
      "text": "[REF:RERANKING]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 6) Retrieval: lexical-first without embeddings (algorithmic contract) > 6.4 Reranking (deterministic \"score + reasons\")"
    },
    "RERANK-REASONS": {
      "line": 240,
      "text": "Reranking must be deterministic and explainable; store \"reasons\" for selected anchors in the ContextPack. [REF:RERANK-RE",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 6) Retrieval: lexical-first without embeddings (algorithmic contract) > 6.4 Reranking (deterministic \"score + reasons\")"
    },
    "ANCHOR-INVARIANTS": {
      "line": 243,
      "text": "[REF:ANCHOR-INVARIANTS]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 6) Retrieval: lexical-first without embeddings (algorithmic contract) > 6.5 Anchor selection invariants"
    },
    "ORIGIN-UNKNOWN-RULE": {
      "line": 249,
      "text": "- origin chain (or explicit \"origin unknown\") for UI flows. [REF:ORIGIN-UNKNOWN-RULE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 6) Retrieval: lexical-first without embeddings (algorithmic contract) > 6.5 Anchor selection invariants"
    },
    "CLOSURE": {
      "line": 252,
      "text": "[REF:CLOSURE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 6) Retrieval: lexical-first without embeddings (algorithmic contract) > 6.6 Closure expansion (bounded by edge type)"
    },
    "TEST-CONFIDENCE": {
      "line": 257,
      "text": "Include config flags encountered. Include tests with confidence grading. [REF:TEST-CONFIDENCE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 6) Retrieval: lexical-first without embeddings (algorithmic contract) > 6.6 Closure expansion (bounded by edge type)"
    },
    "FILTER-NO-CODE": {
      "line": 260,
      "text": "[REF:FILTER-NO-CODE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 6) Retrieval: lexical-first without embeddings (algorithmic contract) > 6.7 Search filters must be declarative (no code)"
    },
    "FILTER-FORBIDDEN": {
      "line": 261,
      "text": "Search `{range,file,filter}` is allowed only if `filter` is a declarative DSL or macro reference. Agent-supplied executa",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 6) Retrieval: lexical-first without embeddings (algorithmic contract) > 6.7 Search filters must be declarative (no code)"
    },
    "SEC-7": {
      "line": 266,
      "text": "[REF:SEC-7]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 7) ContextPack contract (what the planner agent receives)"
    },
    "CP-SECTIONS": {
      "line": 269,
      "text": "[REF:CP-SECTIONS]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 7) ContextPack contract (what the planner agent receives) > 7.1 Required ContextPack sections"
    },
    "CP-HEADER": {
      "line": 270,
      "text": "1) Header (workId, repoSnapshotId, contextPackId/hash) [REF:CP-HEADER]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 7) ContextPack contract (what the planner agent receives) > 7.1 Required ContextPack sections"
    },
    "TASKSPEC": {
      "line": 271,
      "text": "2) TaskSpec (quoted constraints + normalized AC + conflicts) [REF:TASKSPEC]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 7) ContextPack contract (what the planner agent receives) > 7.1 Required ContextPack sections"
    },
    "CP-STRATEGY": {
      "line": 272,
      "text": "3) Active Strategy (strategyId + ContextSignature reasons) [REF:CP-STRATEGY]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 7) ContextPack contract (what the planner agent receives) > 7.1 Required ContextPack sections"
    },
    "CP-POLICIES": {
      "line": 273,
      "text": "4) Active Policies (hard/soft) [REF:CP-POLICIES]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 7) ContextPack contract (what the planner agent receives) > 7.1 Required ContextPack sections"
    },
    "CP-RECIPES": {
      "line": 274,
      "text": "5) Allowed Recipes + Examples (preferred sdf; anti adp) [REF:CP-RECIPES]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 7) ContextPack contract (what the planner agent receives) > 7.1 Required ContextPack sections"
    },
    "CP-ANCHORS": {
      "line": 275,
      "text": "6) Anchors (entrypoint + definition + proof chains) [REF:CP-ANCHORS]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 7) ContextPack contract (what the planner agent receives) > 7.1 Required ContextPack sections"
    },
    "CP-EVIDENCE": {
      "line": 276,
      "text": "7) Evidence (snippets + refs + reasons) [REF:CP-EVIDENCE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 7) ContextPack contract (what the planner agent receives) > 7.1 Required ContextPack sections"
    },
    "CP-VALIDATION": {
      "line": 277,
      "text": "8) Validation plan (hooks + confidence + fallback chain) [REF:CP-VALIDATION]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 7) ContextPack contract (what the planner agent receives) > 7.1 Required ContextPack sections"
    },
    "CP-MISSINGNESS": {
      "line": 278,
      "text": "9) Missingness/Conflicts (explicit gaps + recommended deltas) [REF:CP-MISSINGNESS]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 7) ContextPack contract (what the planner agent receives) > 7.1 Required ContextPack sections"
    },
    "CP-MEMORIES": {
      "line": 279,
      "text": "10) Active Memories (dimensional records from MemoryService matching domain anchors) [REF:CP-MEMORIES]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 7) ContextPack contract (what the planner agent receives) > 7.1 Required ContextPack sections"
    },
    "CP-GATES": {
      "line": 282,
      "text": "[REF:CP-GATES]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 7) ContextPack contract (what the planner agent receives) > 7.2 Pack-ready gates (machine checkable)"
    },
    "SEC-8": {
      "line": 294,
      "text": "[REF:SEC-8]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 8) Strategies (agent doctrines) as graph-native objects"
    },
    "STRATEGY-DEF": {
      "line": 297,
      "text": "[REF:STRATEGY-DEF]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 8) Strategies (agent doctrines) as graph-native objects > 8.1 Strategy definition"
    },
    "STRATEGY-SELECTION": {
      "line": 298,
      "text": "A Strategy is a doctrine: checkpoints, escalation triggers, preferred recipes, and a validation profile. Strategy select",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 8) Strategies (agent doctrines) as graph-native objects > 8.1 Strategy definition"
    },
    "CONTEXTSIGNATURE": {
      "line": 301,
      "text": "[REF:CONTEXTSIGNATURE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 8) Strategies (agent doctrines) as graph-native objects > 8.2 ContextSignature (no embeddings)"
    },
    "CONTEXTSIGNATURE-FEATURES": {
      "line": 302,
      "text": "Compute simple boolean/ordinal features (8 total): [REF:CONTEXTSIGNATURE-FEATURES]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 8) Strategies (agent doctrines) as graph-native objects > 8.2 ContextSignature (no embeddings)"
    },
    "STRATEGY-COMPLIANCE": {
      "line": 309,
      "text": "[REF:STRATEGY-COMPLIANCE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 8) Strategies (agent doctrines) as graph-native objects > 8.3 Strategy compliance"
    },
    "STRATEGY-SWITCH-TRIGGERS": {
      "line": 310,
      "text": "PlanGraph must conform to selected strategy. Deviations require `strategyDeviationReason` + evidence. Strategy switches ",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 8) Strategies (agent doctrines) as graph-native objects > 8.3 Strategy compliance"
    },
    "STRATEGY-CLASSES": {
      "line": 313,
      "text": "[REF:STRATEGY-CLASSES]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 8) Strategies (agent doctrines) as graph-native objects > 8.4 Strategy classes (4 mandatory)"
    },
    "STRATEGY-MEMORY": {
      "line": 322,
      "text": "[REF:STRATEGY-MEMORY]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 8) Strategies (agent doctrines) as graph-native objects > 8.5 Memory-carried strategy signals"
    },
    "STRATEGY-SIGNAL-OVERRIDE": {
      "line": 323,
      "text": "Active memories with `enforcementType: \"strategy_signal\"` can override ContextSignature features for specific domain anc",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 8) Strategies (agent doctrines) as graph-native objects > 8.5 Memory-carried strategy signals"
    },
    "SEC-9": {
      "line": 328,
      "text": "[REF:SEC-9]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 9) Policies, recipes, examples, and codemods"
    },
    "POLICIES": {
      "line": 331,
      "text": "[REF:POLICIES]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 9) Policies, recipes, examples, and codemods > 9.1 Policies (hard vs soft)"
    },
    "POLICY-NO-ADP": {
      "line": 332,
      "text": "- Hard: do not introduce `adp-*` [REF:POLICY-NO-ADP]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 9) Policies, recipes, examples, and codemods > 9.1 Policies (hard vs soft)"
    },
    "POLICY-PREFER-SDF": {
      "line": 333,
      "text": "- Soft: prefer `sdf-*` over native controls when possible [REF:POLICY-PREFER-SDF]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 9) Policies, recipes, examples, and codemods > 9.1 Policies (hard vs soft)"
    },
    "POLICY-FED-PROOF": {
      "line": 334,
      "text": "- Federation proof required for execution-ready packs [REF:POLICY-FED-PROOF]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 9) Policies, recipes, examples, and codemods > 9.1 Policies (hard vs soft)"
    },
    "POLICY-SHADOW": {
      "line": 335,
      "text": "- Shadow DOM testing confidence rules [REF:POLICY-SHADOW]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 9) Policies, recipes, examples, and codemods > 9.1 Policies (hard vs soft)"
    },
    "CODEMODS": {
      "line": 338,
      "text": "[REF:CODEMODS]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 9) Policies, recipes, examples, and codemods > 9.2 Codemods: manifest + graph recipe nodes"
    },
    "BUILTIN-CODEMODS": {
      "line": 339,
      "text": "Built-in AST codemods (4): [REF:BUILTIN-CODEMODS]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 9) Policies, recipes, examples, and codemods > 9.2 Codemods: manifest + graph recipe nodes"
    },
    "CUSTOM-CODEMODS": {
      "line": 345,
      "text": "Custom codemod registry: [REF:CUSTOM-CODEMODS]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 9) Policies, recipes, examples, and codemods > 9.2 Codemods: manifest + graph recipe nodes"
    },
    "CODEMOD-PARAMS": {
      "line": 351,
      "text": "Invocation must be `recipeId + validated params` (no arbitrary CLI). [REF:CODEMOD-PARAMS]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 9) Policies, recipes, examples, and codemods > 9.2 Codemods: manifest + graph recipe nodes"
    },
    "RECIPES": {
      "line": 354,
      "text": "[REF:RECIPES]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 9) Policies, recipes, examples, and codemods > 9.3 Recipes (2 built-in)"
    },
    "RECIPE-OBS": {
      "line": 360,
      "text": "Recipe execution via `run_automation_recipe` emits episodic event with full provenance. [REF:RECIPE-OBS]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 9) Policies, recipes, examples, and codemods > 9.3 Recipes (2 built-in)"
    },
    "EXAMPLES": {
      "line": 363,
      "text": "[REF:EXAMPLES]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 9) Policies, recipes, examples, and codemods > 9.4 Few-shot examples without embeddings"
    },
    "EX-A": {
      "line": 364,
      "text": "- Scenario A: mine existing `sdf-*` usage patterns. [REF:EX-A]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 9) Policies, recipes, examples, and codemods > 9.4 Few-shot examples without embeddings"
    },
    "EX-B": {
      "line": 365,
      "text": "- Scenario B: mine migration diffs and mappings.json outputs. [REF:EX-B]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 9) Policies, recipes, examples, and codemods > 9.4 Few-shot examples without embeddings"
    },
    "EX-C": {
      "line": 366,
      "text": "- Scenario C: auto-scaffold from friction — rejection patterns generate scaffolded few-shot records with `before` filled",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 9) Policies, recipes, examples, and codemods > 9.4 Few-shot examples without embeddings"
    },
    "ADP-ANTI": {
      "line": 367,
      "text": "- adp examples are **anti-examples/removal targets** by default. [REF:ADP-ANTI]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 9) Policies, recipes, examples, and codemods > 9.4 Few-shot examples without embeddings"
    },
    "FEWSHOT-INJECTION": {
      "line": 368,
      "text": "- Few-shot examples injected into `trace_symbol_graph` results when `enableFewShotInjection` is true. [REF:FEWSHOT-INJEC",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 9) Policies, recipes, examples, and codemods > 9.4 Few-shot examples without embeddings"
    },
    "SEC-10": {
      "line": 373,
      "text": "[REF:SEC-10]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract)"
    },
    "PG-ENVELOPE": {
      "line": 376,
      "text": "[REF:PG-ENVELOPE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.1 Envelope required (day‑0 trimmed)"
    },
    "PG-KIND-SPECIFIC": {
      "line": 387,
      "text": "[REF:PG-KIND-SPECIFIC]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.2 Per-node required fields by kind"
    },
    "PG-COMMON": {
      "line": 388,
      "text": "Common (all nodes): nodeId, kind, dependsOn[], atomicityBoundary, expectedFailureSignatures[], correctionCandidateOnFail",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.2 Per-node required fields by kind"
    },
    "PG-CHANGE-REQ": {
      "line": 390,
      "text": "Change nodes require: operation, targetFile, targetSymbols[], whyThisFile, citations[], codeEvidence[], policyRefs[], ve",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.2 Per-node required fields by kind"
    },
    "PG-VALIDATE-REQ": {
      "line": 392,
      "text": "Validate nodes require: verificationHooks[], mapsToNodeIds[], successCriteria. [REF:PG-VALIDATE-REQ]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.2 Per-node required fields by kind"
    },
    "PG-ESCALATE-REQ": {
      "line": 394,
      "text": "Escalate nodes require: requestedEvidence[], blockingReasons[], proposedNextStrategyId (optional). [REF:PG-ESCALATE-REQ]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.2 Per-node required fields by kind"
    },
    "PG-SIDEEFFECT-REQ": {
      "line": 396,
      "text": "Side-effect nodes require: sideEffectType, sideEffectPayloadRef, commitGateId; should depend on validate nodes. [REF:PG-",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.2 Per-node required fields by kind"
    },
    "PG-SCOPE": {
      "line": 399,
      "text": "[REF:PG-SCOPE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.3 Scope and safety rules"
    },
    "PG-SCOPE-REJECT": {
      "line": 404,
      "text": "Reject on first violation. [REF:PG-SCOPE-REJECT]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.3 Scope and safety rules"
    },
    "PG-EVIDENCE": {
      "line": 407,
      "text": "[REF:PG-EVIDENCE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.4 Evidence rules (category minima; non-gameable)"
    },
    "PG-EVIDENCE-CATS": {
      "line": 408,
      "text": "- Use category-based minima: minRequirementSources, minCodeEvidenceSources, optional minPolicySources. [REF:PG-EVIDENCE-",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.4 Evidence rules (category minima; non-gameable)"
    },
    "PG-DISTINCT": {
      "line": 409,
      "text": "- Distinct-source definition must prevent gaming (\"two refs to same file\" ≠ two sources). [REF:PG-DISTINCT]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.4 Evidence rules (category minima; non-gameable)"
    },
    "PG-CAT-COVERAGE": {
      "line": 410,
      "text": "- For feature work: require at least one requirement citation AND one codeEvidence anchor. [REF:PG-CAT-COVERAGE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.4 Evidence rules (category minima; non-gameable)"
    },
    "PG-LOW-EVIDENCE": {
      "line": 412,
      "text": "Single-source allowance (only when allowSingleSourceWithGuard=true): [REF:PG-LOW-EVIDENCE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.4 Evidence rules (category minima; non-gameable)"
    },
    "PG-MEMORY-RULES": {
      "line": 418,
      "text": "[REF:PG-MEMORY-RULES]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.5 Memory rule enforcement"
    },
    "MEMORY-PLAN-RULES": {
      "line": 419,
      "text": "Active memories with `enforcementType: \"plan_rule\"` are enforced during plan validation: [REF:MEMORY-PLAN-RULES]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.5 Memory rule enforcement"
    },
    "PG-ATOMICITY": {
      "line": 426,
      "text": "[REF:PG-ATOMICITY]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.6 Atomicity rules"
    },
    "PG-NO-MIX": {
      "line": 430,
      "text": "- no mixed refactor+feature+migration unless explicitly justified. [REF:PG-NO-MIX]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.6 Atomicity rules"
    },
    "PG-VERIFY": {
      "line": 433,
      "text": "[REF:PG-VERIFY]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.7 Verification rules"
    },
    "PG-VERIFY-NOTGENERIC": {
      "line": 436,
      "text": "- hooks must map to acceptance criteria (not \"run tests\") [REF:PG-VERIFY-NOTGENERIC]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.7 Verification rules"
    },
    "PG-STRATEGY": {
      "line": 439,
      "text": "[REF:PG-STRATEGY]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.8 Strategy compliance and switching"
    },
    "PG-STRATEGY-SWITCH": {
      "line": 442,
      "text": "- strategy switch allowed only via hard triggers after failure signatures [REF:PG-STRATEGY-SWITCH]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.8 Strategy compliance and switching"
    },
    "PG-REJECT-CODES": {
      "line": 445,
      "text": "[REF:PG-REJECT-CODES]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.9 Rejection codes (17 total)"
    },
    "RC-FED": {
      "line": 455,
      "text": "| `PLAN_FEDERATION_PROOF_MISSING` | Federation proof chains [REF:RC-FED] |",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.9 Rejection codes (17 total)"
    },
    "RC-ORIGIN": {
      "line": 456,
      "text": "| `PLAN_ORIGIN_UNKNOWN` | ag-Grid origin chain [REF:RC-ORIGIN] |",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.9 Rejection codes (17 total)"
    },
    "RC-POLICY": {
      "line": 457,
      "text": "| `PLAN_POLICY_VIOLATION` | Policy rule violation [REF:RC-POLICY] |",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.9 Rejection codes (17 total)"
    },
    "RC-CONTRACT": {
      "line": 458,
      "text": "| `PLAN_MISSING_CONTRACT_ANCHOR` | Contract anchor missing [REF:RC-CONTRACT] |",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.9 Rejection codes (17 total)"
    },
    "RC-VALCONF": {
      "line": 459,
      "text": "| `PLAN_VALIDATION_CONFIDENCE_TOO_LOW` | Confidence threshold [REF:RC-VALCONF] |",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 10) PlanGraph acceptance checklist (validator contract) > 10.9 Rejection codes (17 total)"
    },
    "SEC-11": {
      "line": 469,
      "text": "[REF:SEC-11]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 11) Observability + Memory System"
    },
    "OBS-RECORD": {
      "line": 472,
      "text": "[REF:OBS-RECORD]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 11) Observability + Memory System > 11.1 What to record (episodic plane)"
    },
    "MEMORY-SYSTEM": {
      "line": 482,
      "text": "[REF:MEMORY-SYSTEM]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 11) Observability + Memory System > 11.2 Memory system (friction-driven learning)"
    },
    "MEMORY-ENTRY": {
      "line": 485,
      "text": "[REF:MEMORY-ENTRY]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 11) Observability + Memory System > 11.2 Memory system (friction-driven learning) > 11.2.1 Three entry points"
    },
    "MEMORY-FRICTION": {
      "line": 486,
      "text": "1. **Friction-based** (automatic): Same rejection code hits `rejectionThreshold` (default 3) times → auto-create pending",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 11) Observability + Memory System > 11.2 Memory system (friction-driven learning) > 11.2.1 Three entry points"
    },
    "MEMORY-HUMAN": {
      "line": 487,
      "text": "2. **Human override** (file drop): JSON files in `.ai/memory/overrides/` → processed on next `submit_execution_plan`, go",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 11) Observability + Memory System > 11.2 Memory system (friction-driven learning) > 11.2.1 Three entry points"
    },
    "MEMORY-RETRO": {
      "line": 488,
      "text": "3. **Retrospective** (`signal_task_complete`): Reviews all friction data, scaffolds memory candidates from high-frequenc",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 11) Observability + Memory System > 11.2 Memory system (friction-driven learning) > 11.2.1 Three entry points"
    },
    "MEMORY-DIMENSIONS": {
      "line": 491,
      "text": "[REF:MEMORY-DIMENSIONS]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 11) Observability + Memory System > 11.2 Memory system (friction-driven learning) > 11.2.2 Dimensional model"
    },
    "MEMORY-ENFORCEMENT": {
      "line": 499,
      "text": "[REF:MEMORY-ENFORCEMENT]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 11) Observability + Memory System > 11.2 Memory system (friction-driven learning) > 11.2.3 Three enforcement mechanisms"
    },
    "ENFORCE-FEWSHOT": {
      "line": 502,
      "text": "| `few_shot` | `trace_symbol_graph` handler | Injected as before/after examples in results [REF:ENFORCE-FEWSHOT] |",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 11) Observability + Memory System > 11.2 Memory system (friction-driven learning) > 11.2.3 Three enforcement mechanisms"
    },
    "ENFORCE-PLANRULE": {
      "line": 503,
      "text": "| `plan_rule` | `planGraphValidator` | Required steps / deny conditions checked against plan nodes [REF:ENFORCE-PLANRULE",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 11) Observability + Memory System > 11.2 Memory system (friction-driven learning) > 11.2.3 Three enforcement mechanisms"
    },
    "ENFORCE-STRATEGY": {
      "line": 504,
      "text": "| `strategy_signal` | `strategySelector` | Feature flag overrides for domain-specific strategy tuning [REF:ENFORCE-STRAT",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 11) Observability + Memory System > 11.2 Memory system (friction-driven learning) > 11.2.3 Three enforcement mechanisms"
    },
    "DOMAIN-ANCHORS": {
      "line": 507,
      "text": "[REF:DOMAIN-ANCHORS]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 11) Observability + Memory System > 11.2 Memory system (friction-driven learning) > 11.2.4 Domain anchors (folder-based)"
    },
    "FRICTION-LEDGER": {
      "line": 514,
      "text": "[REF:FRICTION-LEDGER]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 11) Observability + Memory System > 11.2 Memory system (friction-driven learning) > 11.2.5 Friction ledger"
    },
    "MEMORY-LIFECYCLE": {
      "line": 518,
      "text": "[REF:MEMORY-LIFECYCLE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 11) Observability + Memory System > 11.2 Memory system (friction-driven learning) > 11.2.6 Memory lifecycle"
    },
    "RETROSPECTIVE-HANDLER": {
      "line": 530,
      "text": "[REF:RETROSPECTIVE-HANDLER]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 11) Observability + Memory System > 11.3 Session retrospective (signal_task_complete)"
    },
    "PROMOTION": {
      "line": 540,
      "text": "[REF:PROMOTION]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 11) Observability + Memory System > 11.4 Promotion to policy plane (Author)"
    },
    "PROMOTION-GATED": {
      "line": 541,
      "text": "Only promote after validation passes (or explicit human approval): aliases, mappings, recipes, examples, strategy tuning",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 11) Observability + Memory System > 11.4 Promotion to policy plane (Author)"
    },
    "SEC-12": {
      "line": 546,
      "text": "[REF:SEC-12]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 12) Verb reference (18 verbs)"
    },
    "VERBS-PREPLAN": {
      "line": 549,
      "text": "[REF:VERBS-PREPLAN]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 12) Verb reference (18 verbs) > 12.1 Pre-plan verbs (14, available in PLAN_REQUIRED)"
    },
    "VERBS-POSTPLAN": {
      "line": 568,
      "text": "[REF:VERBS-POSTPLAN]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 12) Verb reference (18 verbs) > 12.2 Post-plan verbs (4 additional, available in PLAN_ACCEPTED/EXECUTION_ENABLED)"
    },
    "VERBS-BUDGET-SAFE": {
      "line": 577,
      "text": "[REF:VERBS-BUDGET-SAFE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 12) Verb reference (18 verbs) > 12.3 Budget-safe verbs (callable even when budget exceeded)"
    },
    "SEC-13": {
      "line": 583,
      "text": "[REF:SEC-13]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation)"
    },
    "GOT-IDENTITY": {
      "line": 586,
      "text": "[REF:GOT-IDENTITY]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.1 Snapshot/identity gotchas"
    },
    "GOT-SNAP": {
      "line": 587,
      "text": "- snapshot mixing → hard fail pack [REF:GOT-SNAP]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.1 Snapshot/identity gotchas"
    },
    "GOT-DUP": {
      "line": 588,
      "text": "- duplicate symbol identities → stable join keys + unify [REF:GOT-DUP]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.1 Snapshot/identity gotchas"
    },
    "GOT-GEN": {
      "line": 589,
      "text": "- generated artifacts poisoning → exclude by default [REF:GOT-GEN]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.1 Snapshot/identity gotchas"
    },
    "GOT-ROUTES": {
      "line": 592,
      "text": "[REF:GOT-ROUTES]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.2 Angular routing/nav gotchas"
    },
    "GOT-URL": {
      "line": 593,
      "text": "- string-built URLs → unresolved routeRefs → escalate [REF:GOT-URL]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.2 Angular routing/nav gotchas"
    },
    "GOT-GUARD": {
      "line": 594,
      "text": "- guards/resolvers affect behavior → include in closure when present [REF:GOT-GUARD]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.2 Angular routing/nav gotchas"
    },
    "GOT-AGGRID": {
      "line": 597,
      "text": "[REF:GOT-AGGRID]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.3 ag-Grid gotchas"
    },
    "GOT-COLDEF": {
      "line": 598,
      "text": "- columnDef factories/builders → index symbol refs [REF:GOT-COLDEF]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.3 ag-Grid gotchas"
    },
    "GOT-RENDER": {
      "line": 599,
      "text": "- renderer registry indirection → resolver or explicit uncertainty [REF:GOT-RENDER]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.3 ag-Grid gotchas"
    },
    "GOT-ORIGIN": {
      "line": 600,
      "text": "- origin missing → mark ORIGIN_UNKNOWN; bias escalate [REF:GOT-ORIGIN]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.3 ag-Grid gotchas"
    },
    "GOT-FED": {
      "line": 603,
      "text": "[REF:GOT-FED]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.4 Federation gotchas (highest severity)"
    },
    "GOT-FED-MISS": {
      "line": 604,
      "text": "- host→remote proof missing → pack insufficient [REF:GOT-FED-MISS]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.4 Federation gotchas (highest severity)"
    },
    "GOT-FED-AMB": {
      "line": 605,
      "text": "- multiple remotes plausible → ambiguity must be explicit [REF:GOT-FED-AMB]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.4 Federation gotchas (highest severity)"
    },
    "GOT-SHADOW": {
      "line": 608,
      "text": "[REF:GOT-SHADOW]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.5 Shadow DOM / sdf gotchas"
    },
    "GOT-SHADOW-TEST": {
      "line": 609,
      "text": "- tests don't pierce shadowRoot → false confidence → downgrade [REF:GOT-SHADOW-TEST]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.5 Shadow DOM / sdf gotchas"
    },
    "GOT-CONTRACT": {
      "line": 610,
      "text": "- contract drift → stale examples → downweight; refresh [REF:GOT-CONTRACT]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.5 Shadow DOM / sdf gotchas"
    },
    "GOT-MIGRATION": {
      "line": 613,
      "text": "[REF:GOT-MIGRATION]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.6 Migration gotchas"
    },
    "GOT-MAP": {
      "line": 614,
      "text": "- mappings incomplete → codemod unhandled patterns must surface [REF:GOT-MAP]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.6 Migration gotchas"
    },
    "GOT-EXCEPTION": {
      "line": 615,
      "text": "- scoped exceptions needed → encode explicitly in policy [REF:GOT-EXCEPTION]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.6 Migration gotchas"
    },
    "GOT-LEXICAL": {
      "line": 618,
      "text": "[REF:GOT-LEXICAL]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.7 Lexical-only gotchas"
    },
    "GOT-ALIAS": {
      "line": 619,
      "text": "- vocabulary mismatch → alias expansion + negative lexemes [REF:GOT-ALIAS]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.7 Lexical-only gotchas"
    },
    "GOT-HUB": {
      "line": 620,
      "text": "- hub bias → penalties + corroboration [REF:GOT-HUB]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.7 Lexical-only gotchas"
    },
    "GOT-TW": {
      "line": 621,
      "text": "- Tailwind noise → downweight [REF:GOT-TW]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.7 Lexical-only gotchas"
    },
    "GOT-PLAN": {
      "line": 624,
      "text": "[REF:GOT-PLAN]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.8 Planning/validation gotchas"
    },
    "GOT-PLAUSIBLE": {
      "line": 625,
      "text": "- plausible but wrong plan → require requirement+code evidence [REF:GOT-PLAUSIBLE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.8 Planning/validation gotchas"
    },
    "GOT-CHURN": {
      "line": 626,
      "text": "- regeneration churn → require deltas/strategy switch [REF:GOT-CHURN]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.8 Planning/validation gotchas"
    },
    "GOT-FLAKE": {
      "line": 627,
      "text": "- flaky tests → avoid promoting unstable patterns [REF:GOT-FLAKE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.8 Planning/validation gotchas"
    },
    "GOT-MEMORY": {
      "line": 630,
      "text": "[REF:GOT-MEMORY]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.9 Memory system gotchas"
    },
    "GOT-SCAFFOLD": {
      "line": 631,
      "text": "- Scaffolded few-shots have blank `after`/`whyWrong` → human must fill before effective [REF:GOT-SCAFFOLD]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.9 Memory system gotchas"
    },
    "GOT-PLANRULE-APPROVAL": {
      "line": 632,
      "text": "- Auto-promotion of `plan_rule` memories is blocked by default → requires human approval [REF:GOT-PLANRULE-APPROVAL]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.9 Memory system gotchas"
    },
    "GOT-PASSIVE": {
      "line": 633,
      "text": "- MCP is passive stdio → cannot push corrections mid-session; only catches patterns at retrospective [REF:GOT-PASSIVE]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.9 Memory system gotchas"
    },
    "GOT-ANCHOR-COARSE": {
      "line": 634,
      "text": "- Folder-based anchors may be too coarse for cross-cutting concerns → use `anchorIncludeOverrides` [REF:GOT-ANCHOR-COARS",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 13) Comprehensive gotchas (with detection + mitigation) > 13.9 Memory system gotchas"
    },
    "SEC-14": {
      "line": 639,
      "text": "[REF:SEC-14]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 14) Evaluation harness (how you know retrieval is good)"
    },
    "EVAL-TASKS": {
      "line": 642,
      "text": "[REF:EVAL-TASKS]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 14) Evaluation harness (how you know retrieval is good) > 14.1 Golden tasks"
    },
    "EVAL-METRICS": {
      "line": 649,
      "text": "[REF:EVAL-METRICS]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 14) Evaluation harness (how you know retrieval is good) > 14.2 Metrics"
    },
    "METRIC-FRICTION": {
      "line": 658,
      "text": "- **friction resolution rate** (memories created vs resolved) [REF:METRIC-FRICTION]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 14) Evaluation harness (how you know retrieval is good) > 14.2 Metrics"
    },
    "METRIC-MEMORY": {
      "line": 659,
      "text": "- **memory enforcement rate** (how often memories prevent re-rejection) [REF:METRIC-MEMORY]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 14) Evaluation harness (how you know retrieval is good) > 14.2 Metrics"
    },
    "TEST-HARNESS": {
      "line": 662,
      "text": "[REF:TEST-HARNESS]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 14) Evaluation harness (how you know retrieval is good) > 14.3 Test harness"
    },
    "SEC-15": {
      "line": 678,
      "text": "[REF:SEC-15]",
      "heading_path": "Graph-Backed Agentic Gateway Reference Manual (ADP / MCP / No External LLMs) > 15) File reference"
    }
  }
}
